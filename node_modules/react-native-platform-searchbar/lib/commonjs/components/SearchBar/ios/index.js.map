{"version":3,"sources":["index.tsx"],"names":["SearchBar","ref","value","theme","cancelText","cancelTextStyle","returnKeyType","selectionColor","iosBlue","placeholderTextColor","iosLightPlaceholderGray","iosDarkPlaceholderGray","iconColor","leftIcon","style","inputStyle","children","onFocus","onChangeText","onCancel","onClear","props","styles","defaultStyles","darkStyles","cancelButtonVisible","setCancelButtonVisible","inputRef","current","handleFocus","e","LayoutAnimation","configureNext","Presets","easeInEaseOut","duration","handleClear","handleCancel","blur","wrapper","inputWrapper","input","clearButton","undefined","cancelButton","StyleSheet","create","flexDirection","alignItems","flex","height","backgroundColor","borderRadius","paddingHorizontal","position","width","marginLeft","marginRight","color"],"mappings":"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","sourcesContent":["import React, {\n    useRef,\n    useState,\n    forwardRef,\n    useImperativeHandle,\n} from 'react';\nimport {\n    LayoutAnimation,\n    NativeSyntheticEvent,\n    StyleSheet,\n    TextInput,\n    TextInputFocusEventData,\n    View,\n} from 'react-native';\n\nimport {\n    iosBlue,\n    iosDarkPlaceholderGray,\n    iosLightPlaceholderGray,\n} from '../../../constants/colors';\nimport SearchIcon from '../../icons/SearchIcon';\nimport CancelButton from './CancelButton';\nimport ClearButton from './ClearButton';\n\nimport type { SearchBarProps } from '../../../types';\n\nconst SearchBar = forwardRef<TextInput | null, SearchBarProps>(\n    (\n        {\n            value,\n            theme = 'light',\n            cancelText = 'Cancel',\n            cancelTextStyle,\n            returnKeyType = 'search',\n            selectionColor = iosBlue,\n            placeholderTextColor = theme === 'light'\n                ? iosLightPlaceholderGray\n                : iosDarkPlaceholderGray,\n            iconColor = placeholderTextColor,\n            leftIcon,\n            style,\n            inputStyle,\n            children,\n            onFocus,\n            onChangeText,\n            onCancel,\n            onClear,\n            ...props\n        },\n        ref\n    ) => {\n        const styles = theme === 'light' ? defaultStyles : darkStyles;\n        const [cancelButtonVisible, setCancelButtonVisible] = useState(false);\n        const inputRef = useRef<TextInput>(null);\n        useImperativeHandle(ref, () => inputRef.current!);\n\n        const handleFocus = (\n            e: NativeSyntheticEvent<TextInputFocusEventData>\n        ) => {\n            LayoutAnimation.configureNext({\n                ...LayoutAnimation.Presets.easeInEaseOut,\n                duration: 300,\n            });\n            setCancelButtonVisible(true);\n            if (onFocus) {\n                onFocus(e);\n            }\n        };\n\n        const handleClear = () => {\n            if (onClear) {\n                onClear();\n            }\n            // somehow using inputRef.current.clear() doesn't work\n            onChangeText('');\n        };\n\n        const handleCancel = () => {\n            if (onCancel) {\n                onCancel();\n            }\n            if (inputRef.current) {\n                handleClear();\n                inputRef.current.blur();\n            }\n            LayoutAnimation.configureNext({\n                ...LayoutAnimation.Presets.easeInEaseOut,\n                duration: 300,\n            });\n            setCancelButtonVisible(false);\n        };\n\n        return (\n            <View style={[styles.wrapper, style]}>\n                <View style={styles.inputWrapper}>\n                    <TextInput\n                        ref={inputRef}\n                        value={value}\n                        clearButtonMode=\"never\"\n                        autoCorrect={false}\n                        onChangeText={onChangeText}\n                        onFocus={handleFocus}\n                        returnKeyType={returnKeyType}\n                        placeholderTextColor={placeholderTextColor}\n                        selectionColor={selectionColor}\n                        {...props}\n                        style={[styles.input, inputStyle]}\n                    />\n                    <View pointerEvents=\"box-none\" style={styles.children}>\n                        {leftIcon ? (\n                            <View style={styles.leftIcon}>{leftIcon}</View>\n                        ) : (\n                            <SearchIcon\n                                color={iconColor}\n                                style={styles.leftIcon}\n                            />\n                        )}\n                        {children}\n                        {value ? (\n                            <ClearButton\n                                color={iconColor}\n                                onPress={handleClear}\n                                style={styles.clearButton}\n                            />\n                        ) : undefined}\n                    </View>\n                </View>\n                <CancelButton\n                    text={cancelText}\n                    visible={cancelButtonVisible}\n                    onPress={handleCancel}\n                    style={styles.cancelButton}\n                    textStyle={cancelTextStyle}\n                />\n            </View>\n        );\n    }\n);\n\nconst defaultStyles = StyleSheet.create({\n    wrapper: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n    inputWrapper: {\n        flex: 1,\n        height: 40,\n    },\n    input: {\n        height: 40,\n        flex: 1,\n        backgroundColor: '#E3E3E9',\n        borderRadius: 12,\n        paddingHorizontal: 35,\n    },\n    children: {\n        position: 'absolute',\n        flexDirection: 'row',\n        height: 40,\n        width: '100%',\n        alignItems: 'center',\n    },\n    cancelButton: {\n        marginLeft: 10,\n    },\n    clearButton: {\n        width: 14,\n        height: 14,\n        marginRight: 10,\n    },\n    leftIcon: {\n        marginLeft: 10,\n        marginRight: 'auto',\n        width: 18,\n        height: 18,\n    },\n});\n\nconst darkStyles = StyleSheet.create({\n    ...defaultStyles,\n    input: {\n        ...defaultStyles.input,\n        backgroundColor: '#1c1c1f',\n        color: '#FFF',\n    },\n});\n\nexport default SearchBar;\n"]}