{"version":3,"sources":["index.tsx"],"names":["React","useRef","useState","forwardRef","useImperativeHandle","LayoutAnimation","StyleSheet","TextInput","View","iosBlue","iosDarkPlaceholderGray","iosLightPlaceholderGray","SearchIcon","CancelButton","ClearButton","SearchBar","ref","value","theme","cancelText","cancelTextStyle","returnKeyType","selectionColor","placeholderTextColor","iconColor","leftIcon","style","inputStyle","children","onFocus","onChangeText","onCancel","onClear","props","styles","defaultStyles","darkStyles","cancelButtonVisible","setCancelButtonVisible","inputRef","current","handleFocus","e","configureNext","Presets","easeInEaseOut","duration","handleClear","handleCancel","blur","wrapper","inputWrapper","input","clearButton","undefined","cancelButton","create","flexDirection","alignItems","flex","height","backgroundColor","borderRadius","paddingHorizontal","position","width","marginLeft","marginRight","color"],"mappings":"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","sourcesContent":["import React, {\n    useRef,\n    useState,\n    forwardRef,\n    useImperativeHandle,\n} from 'react';\nimport {\n    LayoutAnimation,\n    NativeSyntheticEvent,\n    StyleSheet,\n    TextInput,\n    TextInputFocusEventData,\n    View,\n} from 'react-native';\n\nimport {\n    iosBlue,\n    iosDarkPlaceholderGray,\n    iosLightPlaceholderGray,\n} from '../../../constants/colors';\nimport SearchIcon from '../../icons/SearchIcon';\nimport CancelButton from './CancelButton';\nimport ClearButton from './ClearButton';\n\nimport type { SearchBarProps } from '../../../types';\n\nconst SearchBar = forwardRef<TextInput | null, SearchBarProps>(\n    (\n        {\n            value,\n            theme = 'light',\n            cancelText = 'Cancel',\n            cancelTextStyle,\n            returnKeyType = 'search',\n            selectionColor = iosBlue,\n            placeholderTextColor = theme === 'light'\n                ? iosLightPlaceholderGray\n                : iosDarkPlaceholderGray,\n            iconColor = placeholderTextColor,\n            leftIcon,\n            style,\n            inputStyle,\n            children,\n            onFocus,\n            onChangeText,\n            onCancel,\n            onClear,\n            ...props\n        },\n        ref\n    ) => {\n        const styles = theme === 'light' ? defaultStyles : darkStyles;\n        const [cancelButtonVisible, setCancelButtonVisible] = useState(false);\n        const inputRef = useRef<TextInput>(null);\n        useImperativeHandle(ref, () => inputRef.current!);\n\n        const handleFocus = (\n            e: NativeSyntheticEvent<TextInputFocusEventData>\n        ) => {\n            LayoutAnimation.configureNext({\n                ...LayoutAnimation.Presets.easeInEaseOut,\n                duration: 300,\n            });\n            setCancelButtonVisible(true);\n            if (onFocus) {\n                onFocus(e);\n            }\n        };\n\n        const handleClear = () => {\n            if (onClear) {\n                onClear();\n            }\n            // somehow using inputRef.current.clear() doesn't work\n            onChangeText('');\n        };\n\n        const handleCancel = () => {\n            if (onCancel) {\n                onCancel();\n            }\n            if (inputRef.current) {\n                handleClear();\n                inputRef.current.blur();\n            }\n            LayoutAnimation.configureNext({\n                ...LayoutAnimation.Presets.easeInEaseOut,\n                duration: 300,\n            });\n            setCancelButtonVisible(false);\n        };\n\n        return (\n            <View style={[styles.wrapper, style]}>\n                <View style={styles.inputWrapper}>\n                    <TextInput\n                        ref={inputRef}\n                        value={value}\n                        clearButtonMode=\"never\"\n                        autoCorrect={false}\n                        onChangeText={onChangeText}\n                        onFocus={handleFocus}\n                        returnKeyType={returnKeyType}\n                        placeholderTextColor={placeholderTextColor}\n                        selectionColor={selectionColor}\n                        {...props}\n                        style={[styles.input, inputStyle]}\n                    />\n                    <View pointerEvents=\"box-none\" style={styles.children}>\n                        {leftIcon ? (\n                            <View style={styles.leftIcon}>{leftIcon}</View>\n                        ) : (\n                            <SearchIcon\n                                color={iconColor}\n                                style={styles.leftIcon}\n                            />\n                        )}\n                        {children}\n                        {value ? (\n                            <ClearButton\n                                color={iconColor}\n                                onPress={handleClear}\n                                style={styles.clearButton}\n                            />\n                        ) : undefined}\n                    </View>\n                </View>\n                <CancelButton\n                    text={cancelText}\n                    visible={cancelButtonVisible}\n                    onPress={handleCancel}\n                    style={styles.cancelButton}\n                    textStyle={cancelTextStyle}\n                />\n            </View>\n        );\n    }\n);\n\nconst defaultStyles = StyleSheet.create({\n    wrapper: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n    inputWrapper: {\n        flex: 1,\n        height: 40,\n    },\n    input: {\n        height: 40,\n        flex: 1,\n        backgroundColor: '#E3E3E9',\n        borderRadius: 12,\n        paddingHorizontal: 35,\n    },\n    children: {\n        position: 'absolute',\n        flexDirection: 'row',\n        height: 40,\n        width: '100%',\n        alignItems: 'center',\n    },\n    cancelButton: {\n        marginLeft: 10,\n    },\n    clearButton: {\n        width: 14,\n        height: 14,\n        marginRight: 10,\n    },\n    leftIcon: {\n        marginLeft: 10,\n        marginRight: 'auto',\n        width: 18,\n        height: 18,\n    },\n});\n\nconst darkStyles = StyleSheet.create({\n    ...defaultStyles,\n    input: {\n        ...defaultStyles.input,\n        backgroundColor: '#1c1c1f',\n        color: '#FFF',\n    },\n});\n\nexport default SearchBar;\n"]}